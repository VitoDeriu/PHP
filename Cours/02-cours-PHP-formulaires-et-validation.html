<!DOCTYPE html>
        <html>
        <head>
            <meta charset="UTF-8">
            <title>Les formulaires et la validation</title>
            <style>
/* From extension vscode.github */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.vscode-dark img[src$=\#gh-light-mode-only],
.vscode-light img[src$=\#gh-dark-mode-only],
.vscode-high-contrast:not(.vscode-high-contrast-light) img[src$=\#gh-light-mode-only],
.vscode-high-contrast-light img[src$=\#gh-dark-mode-only] {
	display: none;
}

/* From extension jebbs.markdown-extended */
@font-face {
  font-family: "Material Icons";
  font-style: normal;
  font-weight: 400;
  src: local("Material Icons"), local("MaterialIcons-Regular"), url("data:application/x-font-woff;charset=utf-8;base64,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") format("woff");
}

.admonition {
  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, .14), 0 1px 5px 0 rgba(0, 0, 0, .12), 0 3px 1px -2px rgba(0, 0, 0, .2);
  position: relative;
  margin: 1.5625em 0;
  padding: 0 1.2rem;
  border-left: .4rem solid rgba(68, 138, 255, .8);
  border-radius: .2rem;
  background-color: rgba(255, 255, 255, 0.05);
  overflow: auto;
}

.admonition>p {
  margin-top: .8rem;
}

.admonition>.admonition-title {
  margin: 0 -1.2rem;
  padding: .8rem 1.2rem .8rem 3.6rem;
  border-bottom: 1px solid rgba(68, 138, 255, .2);
  background-color: rgba(68, 138, 255, .1);
  font-weight: 700;
}

.admonition>.admonition-title:before {
  position: absolute;
  left: 1.2rem;
  font-size: 1.5rem;
  color: rgba(68, 138, 255, .8);
  content: "\E3C9";
}

.admonition>.admonition-title:before {
  font-family: Material Icons;
  font-style: normal;
  font-variant: normal;
  font-weight: 400;
  line-height: 2rem;
  text-transform: none;
  white-space: nowrap;
  speak: none;
  word-wrap: normal;
  direction: ltr;
}

.admonition.summary,
.admonition.abstract,
.admonition.tldr {
  border-left-color: rgba(0, 176, 255, .8);
}

.admonition.summary>.admonition-title,
.admonition.abstract>.admonition-title,
.admonition.tldr>.admonition-title {
  background-color: rgba(0, 176, 255, .1);
  border-bottom-color: rgba(0, 176, 255, .2);
}

.admonition.summary>.admonition-title:before,
.admonition.abstract>.admonition-title:before,
.admonition.tldr>.admonition-title:before {
  color: rgba(0, 176, 255, 1);
  ;
  content: "\E8D2";
}

.admonition.hint,
.admonition.tip {
  border-left-color: rgba(0, 191, 165, .8);
}

.admonition.hint>.admonition-title,
.admonition.tip>.admonition-title {
  background-color: rgba(0, 191, 165, .1);
  border-bottom-color: rgba(0, 191, 165, .2);
}

.admonition.hint>.admonition-title:before,
.admonition.tip>.admonition-title:before {
  color: rgba(0, 191, 165, 1);
  content: "\E80E";
}

.admonition.info,
.admonition.todo {
  border-left-color: rgba(0, 184, 212, .8);
}

.admonition.info>.admonition-title,
.admonition.todo>.admonition-title {
  background-color: rgba(0, 184, 212, .1);
  border-bottom-color: rgba(0, 184, 212, .2);
}

.admonition.info>.admonition-title:before,
.admonition.todo>.admonition-title:before {
  color: rgba(0, 184, 212, 1);
  ;
  content: "\E88E";
}

.admonition.success,
.admonition.check,
.admonition.done {
  border-left-color: rgba(0, 200, 83, .8);
}

.admonition.success>.admonition-title,
.admonition.check>.admonition-title,
.admonition.done>.admonition-title {
  background-color: rgba(0, 200, 83, .1);
  border-bottom-color: rgba(0, 200, 83, .2);
}

.admonition.success>.admonition-title:before,
.admonition.check>.admonition-title:before,
.admonition.done>.admonition-title:before {
  color: rgba(0, 200, 83, 1);
  ;
  content: "\E876";
}

.admonition.question,
.admonition.help,
.admonition.faq {
  border-left-color: rgba(100, 221, 23, .8);
}

.admonition.question>.admonition-title,
.admonition.help>.admonition-title,
.admonition.faq>.admonition-title {
  background-color: rgba(100, 221, 23, .1);
  border-bottom-color: rgba(100, 221, 23, .2);
}

.admonition.question>.admonition-title:before,
.admonition.help>.admonition-title:before,
.admonition.faq>.admonition-title:before {
  color: rgba(100, 221, 23, 1);
  ;
  content: "\E887";
}

.admonition.warning,
.admonition.attention,
.admonition.caution {
  border-left-color: rgba(255, 145, 0, .8);
}

.admonition.warning>.admonition-title,
.admonition.attention>.admonition-title,
.admonition.caution>.admonition-title {
  background-color: rgba(255, 145, 0, .1);
  border-bottom-color: rgba(255, 145, 0, .2);
}

.admonition.attention>.admonition-title:before {
  color: rgba(255, 145, 0, 1);
  content: "\E417";
}

.admonition.warning>.admonition-title:before,
.admonition.caution>.admonition-title:before {
  color: rgba(255, 145, 0, 1);
  content: "\E002";
}

.admonition.failure,
.admonition.fail,
.admonition.missing {
  border-left-color: rgba(255, 82, 82, .8);
}

.admonition.failure>.admonition-title,
.admonition.fail>.admonition-title,
.admonition.missing>.admonition-title {
  background-color: rgba(255, 82, 82, .1);
  border-bottom-color: rgba(255, 82, 82, .2);
}

.admonition.failure>.admonition-title:before,
.admonition.fail>.admonition-title:before,
.admonition.missing>.admonition-title:before {
  color: rgba(255, 82, 82, 1);
  ;
  content: "\E14C";
}

.admonition.danger,
.admonition.error,
.admonition.bug {
  border-left-color: rgba(255, 23, 68, .8);
}

.admonition.danger>.admonition-title,
.admonition.error>.admonition-title,
.admonition.bug>.admonition-title {
  background-color: rgba(255, 23, 68, .1);
  border-bottom-color: rgba(255, 23, 68, .2);
}

.admonition.danger>.admonition-title:before {
  color: rgba(255, 23, 68, 1);
  content: "\E3E7";
}

.admonition.error>.admonition-title:before {
  color: rgba(255, 23, 68, 1);
  content: "\E14C";
}

.admonition.bug>.admonition-title:before {
  color: rgba(255, 23, 68, 1);
  content: "\E868";
}

.admonition.example,
.admonition.snippet {
  border-left-color: rgba(0, 184, 212, .8);
}

.admonition.example>.admonition-title,
.admonition.snippet>.admonition-title {
  background-color: rgba(0, 184, 212, .1);
  border-bottom-color: rgba(0, 184, 212, .2);
}

.admonition.example>.admonition-title:before,
.admonition.snippet>.admonition-title:before {
  color: rgba(0, 184, 212, 1);
  ;
  content: "\E242";
}

.admonition.quote,
.admonition.cite {
  border-left-color: rgba(158, 158, 158, .8);
}

.admonition.quote>.admonition-title,
.admonition.cite>.admonition-title {
  background-color: rgba(158, 158, 158, .1);
  border-bottom-color: rgba(158, 158, 158, .2);
}

.admonition.quote>.admonition-title:before,
.admonition.cite>.admonition-title:before {
  color: rgba(158, 158, 158, 1);
  ;
  content: "\E244";
}
.vscode-light kbd,
.vscode-dark kbd,
.vscode-high-contrast kbd {
  display: inline-block;
  padding: 3px 5px;
  font: 11px "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
  line-height: 10px;
  vertical-align: middle;
  border: solid 1px #d1d5da;
  border-bottom-color: #c6cbd1;
  border-radius: 3px;
  box-shadow: inset 0 -1px 0 #c6cbd1;
}

.vscode-light kbd {
  color: #444d56;
  background-color: #fafbfc;
}
</style>
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
<style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', system-ui, 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        <style>
.task-list-item {
    list-style-type: none;
}

.task-list-item-checkbox {
    margin-left: -20px;
    vertical-align: middle;
    pointer-events: none;
}
</style>
<style>
:root {
  --color-note: #0969da;
  --color-tip: #1a7f37;
  --color-warning: #9a6700;
  --color-severe: #bc4c00;
  --color-caution: #d1242f;
  --color-important: #8250df;
}

</style>
<style>
@media (prefers-color-scheme: dark) {
  :root {
    --color-note: #2f81f7;
    --color-tip: #3fb950;
    --color-warning: #d29922;
    --color-severe: #db6d28;
    --color-caution: #f85149;
    --color-important: #a371f7;
  }
}

</style>
<style>
.markdown-alert {
  padding: 0.5rem 1rem;
  margin-bottom: 16px;
  color: inherit;
  border-left: .25em solid #888;
}

.markdown-alert>:first-child {
  margin-top: 0
}

.markdown-alert>:last-child {
  margin-bottom: 0
}

.markdown-alert .markdown-alert-title {
  display: flex;
  font-weight: 500;
  align-items: center;
  line-height: 1
}

.markdown-alert .markdown-alert-title .octicon {
  margin-right: 0.5rem;
  display: inline-block;
  overflow: visible !important;
  vertical-align: text-bottom;
  fill: currentColor;
}

.markdown-alert.markdown-alert-note {
  border-left-color: var(--color-note);
}

.markdown-alert.markdown-alert-note .markdown-alert-title {
  color: var(--color-note);
}

.markdown-alert.markdown-alert-important {
  border-left-color: var(--color-important);
}

.markdown-alert.markdown-alert-important .markdown-alert-title {
  color: var(--color-important);
}

.markdown-alert.markdown-alert-warning {
  border-left-color: var(--color-warning);
}

.markdown-alert.markdown-alert-warning .markdown-alert-title {
  color: var(--color-warning);
}

.markdown-alert.markdown-alert-tip {
  border-left-color: var(--color-tip);
}

.markdown-alert.markdown-alert-tip .markdown-alert-title {
  color: var(--color-tip);
}

.markdown-alert.markdown-alert-caution {
  border-left-color: var(--color-caution);
}

.markdown-alert.markdown-alert-caution .markdown-alert-title {
  color: var(--color-caution);
}

</style>
        
        </head>
        <body class="vscode-body vscode-light">
            <h1 id="les-formulaires-et-la-validation">Les formulaires et la validation</h1>
<div class="admonition note">
<p class="admonition-title">important Il ne faut <strong>jamais</strong> faire confiance aux données fournies au serveur.</p>
</div>
<h2 id="les-formulaires-html">Les formulaires HTML</h2>
<p>Les formulaires permettent à un utilisateur d'envoyer des données sur le serveur.</p>
<p>Les formulaires HTML sont dans une première étape traités par le navigateur, qui génère la requête HTML contenant les données soumises, puis l'envoie au serveur.</p>
<p>Les champs pris en compte sont les inputs de la balise <code>form</code>.</p>
<p>L'élément <a href="https://developer.mozilla.org/fr/docs/Web/HTML/Element/Form"><code>form</code></a> possède des attributs :</p>
<ul>
<li><code>action</code> : l'url du script chargé de traiter le formulaire</li>
<li><code>method</code> : la méthode HTTP utilisé pour la soumission du formulaire :
<ul>
<li><code>GET</code> : les paramètres sont encodés et transmis sous la forme d'un couple clé=valeur dans l'url</li>
<li><code>POST</code> : les paramètres sont encodés et ajouté au <strong>corps</strong> de la requête HTML. L'entête de la requête contient alors une valeur pour indiquer le type MIME de son contenu <code>Content-Type: application/x-www-form-urlencoded</code> par défaut.</li>
</ul>
</li>
<li><code>enctype</code> : s'utilise avec la méthode POST, pour indiquer un type MIME de formulaire différent :
<ul>
<li><code>multipart/formdata</code> : doit être utilisé en cas de présente d'un input de type <code>file</code>.</li>
<li><code>text/plain</code></li>
</ul>
</li>
<li><code>target</code> : ou afficher la réponsé après soumission du formulaire :
<ul>
<li><code>_self</code> : dans le même contexte HTML</li>
<li><code>_blank</code> : charge la réponse dans la nouvelle fenêtre/onglet.</li>
<li>...</li>
</ul>
</li>
<li><code>name</code> : le nom du formulaire.</li>
</ul>
<h2 id="récupération-des-données-de-formulaire-en-php">Récupération des données de formulaire en PHP</h2>
<p>Voir le cours <a href="../HTTP-PHP.html">HTTP-PHP</a>.</p>
<h2 id="validation-et-nettoyage-des-données">Validation et nettoyage des données.</h2>
<p>Toutes les données parvenant au serveur devraient faire l'objet d'une validation.</p>
<h3 id="empty-isset"><code>empty()</code>, <code>isset()</code></h3>
<p>La fonction <a href="https://www.php.net/manual/fr/function.empty.php"><code>empty()</code></a> permet de déterminer si une variable est considérée comme vide :</p>
<ul>
<li>si elle n'existe pas, ou n'a pas été initialisée,</li>
<li>si elle vaut une chaîne de caractère vide (<code>''</code> ou <code>&quot;&quot;</code>).</li>
<li>si elle vaut <strong>faux</strong></li>
</ul>
<p>La fonction <a href="https://www.php.net/manual/fr/function.isset.php"><code>isset()</code></a> indique si un variable a été définie et a une valeur différente de <code>null</code>.</p>
<h3 id="tester-la-présence-et-la-validité-dun-paramètre">Tester la présence et la validité d'un paramètre</h3>
<p>PHP propose un <a href="https://www.php.net/manual/fr/book.filter.php">ensemble de fonctions</a> permettant de tester la présence et la validité des paramètres, et aussi de nettoyer des paramètres ou des variables.</p>
<p>Ces fonctions utilisent un certains nombre de constantes prédéfinies.</p>
<h4 id="test-de-présence">Test de présence</h4>
<p>On peut tester la présence d'un paramètre de requête avec la fonction <a href="https://www.php.net/manual/fr/function.filter-has-var"><code>filter_has_var()</code></a>, au sein des différentes sources d'entrée (constant à indiquer en premier paramètre de la fonction) :</p>
<ul>
<li><code>INPUT_GET</code> : vérifie que le paramètre existe dans le tableau <code>$_GET</code>,</li>
<li><code>INPUT_POST</code> :  vérifie que le paramètre existe dans le tableau <code>$_POST</code>,</li>
<li><code>INPUT_COOKIE</code> : vérifie que le paramètre existe dans le tableau <code>$_COOKIE</code></li>
<li><code>INPUT_SERVER</code> : vérifie que le paramètre existe dans le tableau <code>$_SERVER</code>,</li>
<li><code>INPUT_ENV</code> : vérifie que le paramètre existe dans le tableau <code>$_ENV</code>.</li>
</ul>
<h4 id="test-de-validité">Test de validité</h4>
<p>Les fonctions de test de validité ou de nettoyage peuvent aussi bien s'appliquer aux données de requêtes (<code>filter_input()</code> et <code>filter_input_array()</code>) qu'à des variables (ou tableau de variables) : <code>filter_var()</code> et <code>filter_var_array()</code>.</p>
<ul>
<li><a href="https://www.php.net/manual/fr/function.filter-input.php"><code>filter_input()</code></a> récupère une variable externe et la filtre.</li>
<li><a href="https://www.php.net/manual/fr/function.filter-input-array.php"><code>filter_input_array()</code></a> récupère plusieurs variables externes et les filtre. Le même filtre est appliqué à toutes les variables données en tableau.</li>
<li><a href="https://www.php.net/manual/fr/function.filter-var.php"><code>filter_var()</code></a> : Filtre une variable avec le filtre spécifié.</li>
<li><a href="https://www.php.net/manual/fr/function.filter-var-array.php"><code>filter_var_array()</code></a> : Filtre toutes les variables du tableau donné en paramètre avec les filtres spécifiés.</li>
</ul>
<p>On utilise les même fonctions pour valider ou nettoyer une variable. En revanche, c'est le filtre (indiqué par une constante) qui indique l'action à réaliser. Les filtres de validations commencent par généralement par <code>FILTER_VALIDATE_</code> et ceux de nettoyage par <code>FILTER_SANITIZE_</code>.
Si une variable est nettoyée, elle n'est pas validé. De la même manière, si une variable est validée, elle n'est pas modifiée.</p>
<!-- TODO : add examples -->
<p>La documentation PHP fournit plusieurs exemples de <a href="https://www.php.net/manual/fr/filter.examples.validation.php">validation</a> et de <a href="https://www.php.net/manual/fr/filter.examples.sanitization.php">nettoyage</a>.</p>
<h3 id="champs-destinés-à-être-affichés-dans-une-page-html">Champs destinés à être affichés dans une page HTML</h3>
<p>Il est fréquent que l'on souhaite ré-afficher au sein d'une page HTML des données préalablement saisies. Pour éviter des attaques classiques type <a href=""><code>XSS</code></a>, il faut échapper les chaînes de caractères.
Pour cela on peut utiliser la fonction <a href="https://www.php.net/manual/fr/function.htmlspecialchars"><code>htmlspecialchars()</code></a>, qui permet de convertir les caractères spéciaux en entité&amp;s HTML.</p>
<!-- 
Il existe aussi les fonctions : 

- [`stripslashes()`]()
- [``]() -->
<!-- ### Téléversement de fichier -->
<h2 id="le-téléversement-de-fichiers-upload-">Le téléversement de fichiers (upload) :</h2>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;upload.php&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span> <span class="hljs-attr">enctype</span>=<span class="hljs-string">&quot;multipart/form-data&quot;</span>&gt;</span> 
  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;file&quot;</span> <span class="hljs-attr">nom</span>=<span class="hljs-string">&quot;fichier&quot;</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span>&gt;</span> 
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
</code></pre>
<p>Pour envoyer des fichiers, on doit rajouter l'attribut <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLFormElement/enctype"><code>enctype</code></a> avec comme valeur <code>mutipart/form-data</code>. Cela surcharge l'entête HTML <code>Content-Type</code> pour indiquer au serveur que le formulaire va être envoyé un plusieurs parties ; et on utilise un <code>input</code> de type <code>file</code> pour permettre à l'utilisateur de choisir le fichier à envoyer.</p>
<p>Si on rajoute <strong>accept=&quot;.pdf&quot;</strong> dans le <code>input type='file'</code>, cela permet de n'afficher dans l'explorateur que les fichiers de type <strong>PDF</strong>.</p>
<h3 id="traitement-coté-serveur-">Traitement coté serveur :</h3>
<p>Les fichiers téléversés sont reçus dans le répertoire temporaire du serveur. C'est le développeur qui a la charge de déplacer ce fichier où il le souhaite.</p>
<p>Pour cela, il existe le tableau super global <a href="https://www.php.net/manual/en/features.file-upload.post-method.php"><code>$_FILE</code></a>, qui est un tableau associatif dont la clé est le nom de l'input. On accède ensuite à plusieurs informations avec les clés suivantes :</p>
<ul>
<li><code>$_FILE['input_file_name']['name']</code> : le nom du fichier original sur le poste client</li>
<li><code>$_FILE['input_file_name']['type']</code> : le type mime indiqué par le navigateur (s'il l'a indiqué)</li>
<li><code>$_FILE['input_file_name']['size']</code> : La taille en octet du fichier envoyé</li>
<li><code>$_FILE['input_file_name']['tmp_name']</code> : le nom temporaire du</li>
<li><code>$_FILE['input_file_name']['error']</code> : le <a href="https://www.php.net/manual/fr/features.file-upload.errors.php">code d'erreur</a> associé au téléversement du fichier</li>
<li><code>$_FILE['input_file_name']['full_path']</code> : depuis PHP 8.1.0, la doc dit de ne pas s'y fier !</li>
</ul>
<p>Pour déplacer un fichier téléversé sur le sevreurr, on utilise en général la méthode <a href="https://www.php.net/manual/fr/function.move-uploaded-file.php"><code>move_uploaded_file</code></a>, qui permet de déplacer un fichier téléchargé.</p>
<p>Il est possible de téléverser plusieurs fichiers à la fois, comme le précise la <a href="https://www.php.net/manual/fr/features.file-upload.multiple.php">doc</a>.</p>
<h2 id="enregistrement-dimage-en-base-de-données">Enregistrement d'image en base de données</h2>
<p>Il peut être utile de stocker les images directement les fichiers binaires tels que les images directement dans la base de données.
Par exemple, les résultats d'imageries numériques, les signatures numériques de document.</p>
<p>En base de données, pour stocker un fichier binaire, on utilise le type <a href=""><code>BLOB</code></a> : Binary Large Object.</p>
<p>En savoir un peu plus sur les blobs et leur traitement :</p>
<ul>
<li><a href="https://www.mysqltutorial.org/mysql-basics/mysql-blob/">MySQL tutorial : BLOB</a></li>
<li><a href="https://www.mysqltutorial.org/php-mysql/php-mysql-blob/">MySQL tutorial : PHP, MySQL, et les blobs</a></li>
</ul>
<h3 id="htmljs--envoyer-et-afficher-une-image-en-base64">HTML/JS : Envoyer et afficher une image en base64</h3>
<p>La base 64 est le format généralement utilisé pour envoyer destinée à être stocké au format binaire et ensuite les afficher dans le navigateur.</p>
<p>Voici un tutoriel pour gérer cela : <a href="https://formcarry.com/blog/how-to-upload-files-as-base64/">Comment téléverser en base 64</a></p>

            <script async src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script>
            
        </body>
        </html>